<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<div layout:fragment="content">

  <h2 class="mt-4 mb-3">Register page</h2>
  <div class="card">
    <div class="card-body">
      <form action="/board/register" method="post" enctype="multipart/form-data">
        <table class="table align-middle">
          <tbody>
          <tr>
            <td style="width: 20%;"><label class="form-label mb-0" for="author">작성자 <span class="text-danger">(필수)</span></label></td>
            <td style="width: 80%;"><input class="form-control" id="author" name="author" placeholder="작성자" type="text">
            </td>
          </tr>
          <tr>
            <td><label class="form-label mb-0" for="title">제목 <span class="text-danger">(필수)</span></label></td>
            <td><input class="form-control" id="title" name="title" placeholder="제목을 입력해 주세요." type="text"></td>
          </tr>
          <tr>
            <td><label class="form-label mb-0" for="content">내용 <span class="text-danger">(필수)</span></label></td>
            <td><textarea class="form-control" id="content" name="content" rows="10" placeholder="내용을 입력해 주세요."></textarea></td>
          </tr>
          <tr>
            <td><label class="form-label mb-0" for="files">첨부파일</label></td>
            <td><input type="file" class="form-control" name="files" id="files" multiple></td>
          </tr>
          </tbody>
        </table>
        <div class="d-flex justify-content-start gap-2">
          <a th:href="@{/board/list}" class="btn btn-secondary" >
            목록
          </a>
          <button class="btn btn-outline-primary ms-auto" type="reset">초기화</button>
          <button class="btn btn-primary" type="submit">저장</button>
        </div>
      </form>
    </div>
  </div>
</div>
<script>
    function validateForm(form) {
        if(form.author.value=='') {
            alert("작성자를 입력해 주세요.")
            form.author.focus()
            return false
        }
        if(form.title.value=='') {
            alert("제목을 입력해 주세요.")
            form.title.focus()
            return false
        }
        if(form.content.value=='') {
            alert("내용을 입력해 주세요.")
            form.content.focus()
            return false
        }
    }
</script>
<script layout:fragment="pagescript" th:inline="javascript">
    const errors = [[${errors}]]
    console.log(errors)
    let errMsg = ''
    if(errors){
        modal.show()
        for(let i = 0; i < errors.length; i++) {
            errMsg += `${errors[i].field}는 ${errors[i].defaultMessage}\n`
        }
    }
</script>